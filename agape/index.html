<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#071a2b" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <link rel="manifest" href="./manifest.webmanifest" />
  <link rel="icon" href="data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQEAYAAABPYyMiAAAABmJLR0T///////8JWPfcAAAACXBIWXMAAABIAAAASABGyWs+AAAAF0lEQVRIx2NgGAWjYBSMglEwCkbBSAcACBAAAeaR9cIAAAAASUVORK5CYII=">
  <title>Sistema √Ågape</title>

  <style>
    :root{
      --bad: #ff3b30;
      --bg1:#071a2b;
      --bg2:#0c3a56;
      --glass: rgba(255,255,255,.08);
      --stroke: rgba(255,255,255,.12);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.60);
      --good:#33d07a;
      --blue:#2d8cff;
      --yellow: rgba(255,215,0,.20);
    }
    *{box-sizing:border-box}
    html,body{height:100%; margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; background: var(--bg1); color:var(--text);}
    body{overflow:hidden}

/* ===== Pagamento v25 (top) ===== */
.payCard{
  margin-top:12px;
  padding:16px;
  border-radius:22px;
  background: rgba(0,0,0,.18);
  border:1px solid rgba(255,255,255,.12);
  box-shadow: 0 24px 55px rgba(0,0,0,.32);
}
.payMsg{line-height:1.2}
.payHello{font-weight:1000; font-size:28px; margin-bottom:6px}
.payTotal{font-weight:800; opacity:.95}
/* === Confer√™ncia: limita a lista e cria scroll interno === */
/* === Confer√™ncia: limita a lista e cria scroll interno (6 itens vis√≠veis) === */
#payItems{
  max-height: calc(4 * 36px);      /* 4 linhas */
  overflow-y: auto;               /* scroll √† direita */
  overflow-x: hidden;
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch;
  padding-right: 4px;             /* respiro pro scrollbar */
}
 .background: rgba(255,255,255,.25); border:1px solid rgba(255,255,255,.10);}
.payItemRow{
  display:flex;
  align-items:center;
  gap:10px;
  padding:8px 0;
  min-height:36px;               /* casa com o calc(6 * 36px) */
}
.payItemLeft{
  font-weight:900;

  flex: 1 1 auto;        /* ocupa s√≥ o espa√ßo dispon√≠vel */
  min-width: 0;          /* üî¥ ESSENCIAL para funcionar com flex */
  
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.payItemDots{flex:1; border-bottom: 2px dotted rgba(255,255,255,.25); height:0; opacity:.9}
.payItemRight{
  font-weight:1000;
  white-space:nowrap;
  flex: 0 0 auto;
}
.payQ{font-weight:1000; font-size:22px; margin:4px 0 12px}
.payIconRow{display:flex; gap:14px; justify-content:center; margin:10px 0 14px}
.payIconBtn{
  width:74px; height:54px;
  border-radius:16px;
  border:1px solid rgba(255,255,255,.16);
  background: rgba(255,255,255,.06);
  color:var(--text);
  display:flex; align-items:center; justify-content:center;
  position:relative;
  box-shadow: 0 16px 35px rgba(0,0,0,.25), inset 0 0 0 1px rgba(255,255,255,.06);
  transition: transform .16s ease, box-shadow .16s ease, filter .16s ease;
  cursor:pointer;
}
.payIconBtn:hover{transform: translateY(-1px) scale(1.03); filter:brightness(1.05)}
.payIconBtn:active{transform: translateY(0) scale(.98)}
.payIconBtn::after{
  content: attr(data-tip);
  position:absolute;
  left:50%; top:-10px;
  transform: translate(-50%,-100%);
  padding:6px 10px;
  border-radius:999px;
  background: rgba(0,0,0,.72);
  border:1px solid rgba(255,255,255,.12);
  color:#fff;
  font-weight:900;
  font-size:12px;
  opacity:0;
  pointer-events:none;
  transition: opacity .15s ease, transform .15s ease;
  white-space:nowrap;
}
.payIconBtn:hover::after{opacity:1; transform: translate(-50%,-115%)}
.payIconImg{width:62px; height:30px; object-fit:contain; display:block; filter:drop-shadow(0 2px 8px rgba(0,0,0,.25));}
.paySvg{font-size:26px; line-height:1}
.payBack{margin-top:8px}
.payHint{margin-top:10px; opacity:.70; font-size:12px}

/* Modal */
.modal{position:fixed; inset:0; display:flex; align-items:center; justify-content:center; z-index:999;}
.modal.hidden{display:none;}
.modal::before{content:""; position:absolute; inset:0; background: rgba(0,0,0,.55); backdrop-filter: blur(4px);}
.modalCard{
  position:relative;
  width:min(420px, calc(100% - 36px));
  border-radius:20px;
  padding:16px;
  background: rgba(10,20,32,.92);
  border:1px solid rgba(255,255,255,.14);
  box-shadow: 0 30px 80px rgba(0,0,0,.55);
}
.modalTop{display:flex; align-items:center; justify-content:space-between; gap:10px}
.modalTitle{font-weight:1000; font-size:20px}
.modalX{border:none; background: rgba(255,255,255,.06); color:var(--text); border-radius:12px; padding:8px 10px; font-weight:1000}
.modalText{margin-top:8px; opacity:.85; font-size:13px; line-height:1.35}
.pixValueRow{display:flex; align-items:center; justify-content:space-between; margin-top:14px;
  padding:12px; border-radius:16px; background: rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.10);}
.pixValueLbl{opacity:.80; font-weight:900}
.pixValue{font-weight:1000; font-size:18px}
.pixKeyRow{display:flex; align-items:center; gap:10px; margin-top:12px;
  padding:12px; border-radius:16px; background: rgba(10,200,160,.12); border:1px solid rgba(100,255,230,.25);}
.pixKeyText{flex:1; font-weight:1000; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;}
.pixCopyBtn{
  width:44px; height:44px; border-radius:14px;
  border:1px solid rgba(255,255,255,.18);
  background: rgba(255,255,255,.08);
  color:var(--text);
  font-size:20px;
  cursor:pointer;
}
.modalOk{margin-top:14px}
.modalCancel{
  width:100%;
  margin-top:10px;
  padding:12px;
  border-radius:16px;
  border:1px solid red;
  background: rgba(255,0,0,0.5);
  color:var(--text);
  font-weight:900;
}

/* Success overlay */
.paySuccess{
  position:fixed;
  top:0; left:0; right:0; bottom:0;
  width:100vw; height:100vh;
  background: rgba(230,204,24,.96);
}
.paySuccess.hidden{display:none;}
.paySuccessBox{
  background: rgba(255,255,255,.75);
  border-radius:18px;
  padding:16px 18px;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:8px;
  box-shadow: 0 22px 70px rgba(0,0,0,.35);
}
.paySuccessGif{width:140px; height:140px; object-fit:contain; display:block}
.payOkText{font-weight:1000; color:#083018}

/* === v25 pay success overlay (yellow full, gif + text only) === */
.paySuccess{position:fixed; inset:0; background:rgba(230,204,24,.96); display:flex; align-items:center; justify-content:center; z-index:9999;}
.paySuccess.hidden{display:none;}
.paySuccessInner{display:flex; flex-direction:column; align-items:center; gap:14px; text-align:center;}
#payGif{width:160px; height:160px; object-fit:contain; filter:drop-shadow(0 12px 26px rgba(0,0,0,.25));}
.payOkText{font-weight:1000; font-size:22px; color:#053018; text-shadow:0 1px 0 rgba(255,255,255,.35);}


    
    .safe{
      padding-top: env(safe-area-inset-top);
      padding-bottom: env(safe-area-inset-bottom);
      padding-left: env(safe-area-inset-left);
      padding-right: env(safe-area-inset-right);
    }

    .screen{
      position:fixed; inset:0;
      display:none;
      background: radial-gradient(1200px 900px at 50% 0%, var(--bg2), var(--bg1));
    }
    .screen.active{display:flex}

    /* Slide transitions */
    .enter-left{transform:translateX(100%); opacity:1}
    .enter-right{transform:translateX(-100%); opacity:1}
    .exit-left{transform:translateX(-100%); opacity:1}
    .exit-right{transform:translateX(100%); opacity:1}
    .screen{transition: transform .46s ease, opacity .46s ease;}
    .screen.active{transform:translateX(0); opacity:1}
    .screen.exit-left,.screen.exit-right,.screen.enter-left,.screen.enter-right{display:flex}

    /* Splash 1 */
    #scr_splash1{
      background:#000 !important;
      align-items:center;
      justify-content:center;
    }

    /* Splash 2 */
    #scr_splash2{align-items:center; justify-content:center; background:#061a2b !important;}
    .splashCenter{display:flex; flex-direction:column; align-items:center; gap:18px; text-align:center; padding:24px;}
    .logoWrap{
      width:92px; height:92px; border-radius:22px;
      background: rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.12);
      overflow:hidden;
      box-shadow: 0 18px 40px rgba(0,0,0,.35);
      transform: scale(.78);
      opacity:0;
      animation: logoZoom 3.0s ease forwards;
    }
    .logoWrap img{width:100%; height:100%; object-fit:cover; display:block}
    .brandText{
      font-weight:800; letter-spacing:.3px;
      font-size: 34px;
      transform: scale(.96);
      opacity:0;
      animation: textZoom 3.0s ease forwards;
      animation-delay: .05s;
    }
    @keyframes logoZoom{
      0%{transform:scale(.78); opacity:0}
      30%{opacity:1}
      100%{transform:scale(1.00); opacity:1}
    }
    @keyframes textZoom{
      0%{transform:scale(.96); opacity:0}
      35%{opacity:1}
      100%{transform:scale(1.00); opacity:1}
    }

    /* Card layout */
    .wrap{width:min(420px, 100%); margin:0 auto; padding:16px;}
    .topBrand{
      display:flex; gap:12px; align-items:center;
      padding:14px 16px;
      border-radius:18px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.10);
      box-shadow: 0 12px 40px rgba(0,0,0,.25);
    }
    .topBrand .bLogo{
      width:46px;height:46px;border-radius:12px; overflow:hidden;
      border:1px solid rgba(255,255,255,.15);
      flex:0 0 auto;
      background: rgba(255,255,255,.10);
      display:flex; align-items:center; justify-content:center;
    }
    .topBrand .bLogo img{width:100%; height:100%; object-fit:cover; display:block}
    .topBrand .bTxt{line-height:1.15}
    .topBrand .bTxt .bTitle{font-weight:800; font-size:18px; line-height:1.1;}
    .topBrand .bTxt .bSub{font-size:12px; opacity:.85; margin-top:2px;}

    .sessionBar{
      margin-top:14px; display:flex; align-items:center; gap:10px; padding:12px 14px; border-radius:14px;
      background:rgba(255,255,255,.05); border:1px solid rgba(255,255,255,.10);
    }
    .dotBig{width:16px;height:16px;border-radius:50%; background:var(--bad); box-shadow:0 0 0 4px rgba(255,0,0,.10);}
    .sessionLine{font-weight:800; font-size:15px; letter-spacing:.2px; flex:1; min-width:0;}

    .card{
      margin-top:14px;
      padding:16px;
      border-radius:22px;
      background: rgba(0,0,0,.18);
      border:1px solid rgba(255,255,255,.12);
      box-shadow: 0 24px 55px rgba(0,0,0,.32);
    }

    .btn{
      width:100%;
      margin-top:14px;
      padding:11px 12px;
      border-radius:14px;
      border:none;
      background: linear-gradient(90deg, #1bb3ff, #3b6cff);
      color:#001018;
      font-weight:900;
      font-size:17px;
      line-height: 1.1 !important;
    }

    .btn2{
      width:100%;
      padding:11px 12px;
      border:none;
      border-radius:14px;
      background: linear-gradient(90deg, #19baff, #3a66ff);
      color:#001018;
      font-weight:1000;
      font-size:17px;
      line-height: 1.1 !important;
    }

    .miniBtn{
      border:1px solid red;
      background: rgba(255,0,0,0.5);
      color: var(--text);
      padding:10px 14px;
      border-radius:14px;
      font-weight:800;
    }


    /* Pix bar */
    .pixBar{
      margin-top:10px; display:flex; align-items:center; justify-content:space-between; gap:12px;
      padding:12px 14px; border-radius:14px;
      background:rgba(10,200,160,.16); border:1px solid rgba(100,255,230,.25);
    }
    .pixBadge{width:64px; height:36px; border-radius:10px; background:rgba(255,255,255,.12);
      display:flex; align-items:center; justify-content:center;}
    .pixBadge img{width:70px;height:26px;object-fit:contain;display:block;filter:drop-shadow(0 2px 8px rgba(0,0,0,.25));}
    .pixKey{font-weight:900; font-size:16px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; flex:1; min-width:0;}

    /* Toast */
    .toast{
      position:fixed; left:50%; bottom:18px; transform:translateX(-50%);
      background: rgba(0,0,0,.75);
      color:white; padding:10px 14px;
      border-radius:14px;
      opacity:0; pointer-events:none;
      transition: opacity .25s ease;
      font-weight:800;
      z-index:99999;
    }
    .toast.show{opacity:1}

    /* Wait envelope */
    .waitCard{ position:relative; }
    .msgBtn{
      position:relative;
      width:44px; height:44px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      display:flex; align-items:center; justify-content:center;
      cursor:pointer;
      flex:0 0 auto;
    }
    .msgIcon{width:24px; height:24px; object-fit:contain; opacity:.95; filter:drop-shadow(0 2px 6px rgba(0,0,0,.35));}
    .msgBadge{
      position:absolute;
      top:-6px; right:-6px;
      width:18px; height:18px;
      border-radius:999px;
      background:#ff3b30;
      border:2px solid rgba(6,26,43,1);
      color:#fff;
      font-weight:1000;
      font-size:12px;
      display:flex; align-items:center; justify-content:center;
      box-shadow:0 10px 24px rgba(0,0,0,.35);
    }
    .hidden{display:none !important;}
    @keyframes pulseBadge{
      0%{transform:scale(1); filter:brightness(1);}
      50%{transform:scale(1.12); filter:brightness(1.2);}
      100%{transform:scale(1); filter:brightness(1);}
    }
    .msgBadge.pulse{animation:pulseBadge 1.1s ease-in-out infinite;}

    /* ===== PRESEN√áA (bonitona) ===== */
    #scr_presenca{
      overflow-y:auto;
      -webkit-overflow-scrolling:touch;
      padding:16px 0;
    }
    #scr_presenca .wrap{min-height:100%; height:auto !important; align-items:flex-start;}
    #scr_presenca .card{max-height: calc(100vh - 32px); overflow-y:auto; -webkit-overflow-scrolling:touch;}

    .hint{
      margin-top:12px; padding:12px 14px; border-radius:14px;
      background:linear-gradient(90deg, rgba(60,170,120,.35), rgba(80,210,160,.22));
      border:1px solid rgba(150,255,210,.25);
    }

    .presResumo{
      display:grid;
      grid-template-columns: 1fr 120px;
      gap:12px;
      border-radius:14px;
      border:2px solid rgba(255, 220, 40, .55);
      background: rgba(180, 150, 0, .25);
      padding:10px;
      margin: 12px 0;
    }
    .presResumoTitle{font-weight:900; margin-bottom:6px;}
    .presResumoLine{display:flex; justify-content:space-between; gap:10px; font-size:12px; padding:2px 0;}
    .barBox{
      width:86px;
      height:130px;
      border-radius:10px;
      overflow:hidden;
      border:2px solid rgba(255,255,255,.18);
      background: rgba(0,0,0,.25);
      display:flex;
      flex-direction:column;
    }
    .barTop{
      background: rgba(255,120,0,.85);
      display:flex; align-items:center; justify-content:center;
      font-weight:900; font-size:13px;
      flex:1;
    }
    .barBottom{
      background: rgba(70,190,120,.85);
      display:flex; align-items:center; justify-content:center;
      font-weight:900; font-size:13px;
      flex:1;
    }
    .barLegend{display:flex; gap:10px; margin-top:8px; font-size:11px; opacity:.95; justify-content:center;}
    .barLegend i{width:10px;height:10px;border-radius:3px;display:inline-block;}
    .lgNo i{background: rgba(255,120,0,.85);}
    .lgYes i{background: rgba(70,190,120,.85);}

    /* ===== CONSUMO (layout simples e est√°vel) ===== */
    #scr_consumo{align-items:stretch; justify-content:center;}
    .page{
      display:flex;
      flex-direction:column;
      height:100%;
      width:min(440px, 100%);
      margin:0 auto;
      padding:16px;
      gap:12px;
    }
    .cashBar{
      display:flex; align-items:center; gap:12px;
      padding:12px 14px; border-radius:14px;
      background: rgba(255,165,0,.22);
      border: 1px solid rgba(255,200,120,.22);
    }
    .cashText{font-weight:1000; font-size:14px;}
    #cashValue{font-weight:1000;}

    .prodScroll{
      flex:1;
      min-height:0;
      overflow:auto;
      -webkit-overflow-scrolling:touch;
      padding: 4px 0;
    }
    .prodRow{
      display:flex; gap:12px; align-items:center; justify-content:space-between;
      padding:14px 14px;
      border-radius:18px;
      background: rgba(0,0,0,.18);
      border:1px solid rgba(255,255,255,.10);
      margin-bottom:12px;
    }
    .pIcon{
      width:50px;height:50px;border-radius:18px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.08);
      flex:0 0 auto;
      display:flex; align-items:center; justify-content:center;
    }
    .pIcon img{background:#fff;width:100%; height:100%; object-fit:contain; display:block}
    .pMid{flex:1; min-width:0}
    .pName{font-weight:900}
    .pDesc{font-size:12px; color:var(--muted); margin-top:2px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
    .pPrice{margin-top:6px; font-weight:900}
    .qtyWrap{display:flex; align-items:center; gap:10px; flex:0 0 auto;}
    .qtyBtn{
      width:40px;height:40px;border-radius:14px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color:var(--text);
      font-size:22px;
      line-height:1;
      display:flex; align-items:center; justify-content:center;
      font-weight:900;
      cursor:pointer;
    }
    .qty{min-width:20px; text-align:center; font-weight:900}

    .consFooter{
      padding: 10px 0 0 0;
      background: linear-gradient(180deg, rgba(7,26,43,0) 0%, rgba(7,26,43,.65) 30%, rgba(7,26,43,.92) 100%);
      border-radius:18px;
    }
    .totalBox{
      padding:14px 14px;
      border-radius:18px;
      background: rgba(0,0,0,.20);
      border:1px solid rgba(255,255,255,.10);
      margin-bottom:12px;
    }
    .totalBox .tLbl{font-size:12px; color:var(--muted)}
    .totalBox .tVal{font-size:28px; font-weight:1000; margin-top:6px}

    /* desktop center */
    @media (min-width:900px){
      body{display:flex; align-items:center; justify-content:center; background:#081b2c;}
      .screen{position:relative; width:420px; height:860px; border-radius:26px; overflow:hidden; box-shadow: 0 30px 80px rgba(0,0,0,.55);}
    }
    .payIconBtn:hover::after{opacity:1; transform: translate(-50%,-115%)}
    .payIconImg{width:62px; height:30px; object-fit:contain; display:block; filter:drop-shadow(0 2px 8px rgba(0,0,0,.25));}
    .paySvg{font-size:26px; line-height:1}
    .payBack{margin-top:8px}
    .payHint{margin-top:10px; opacity:.70; font-size:12px}

    /* FIX: n√£o quebrar linha dentro do #payItems (trunca descri√ß√£o e mant√©m pre√ßo na mesma linha) */
#payItems{
  max-height: calc(4 * 36px);
  overflow-y: auto;
  overflow-x: hidden;
  padding-right: 4px;
  color: #FFD700; /* Amarelo ouro forte */
  font-weight: bold;
}

#payItems .payItemRow{
  display: flex !important;
  align-items: center;
  gap: 10px;
  padding: 8px 0;
  min-height: 36px;
  flex-wrap: nowrap !important;     /* nunca quebra */
}

#payItems .payItemLeft{
  flex: 1 1 auto !important;
  min-width: 0 !important;          /* ESSENCIAL pro "..." funcionar no flex */
  white-space: nowrap !important;
  overflow: hidden !important;
  text-overflow: ellipsis !important;
}

#payItems .payItemDots{
  flex: 1 1 auto !important;        /* pontilhado ocupa o meio */
  min-width: 16px;
}

#payItems .payItemRight{
  flex: 0 0 auto !important;
  white-space: nowrap !important;
}

    /* Pagamento */
    #scr_pagamento{align-items:flex-start; justify-content:center;}
    .payBtns{display:flex; flex-direction:column; gap:12px; margin-top:12px}
    /* .payBtn{
      padding:16px 14px;
      border-radius:18px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color:var(--text);
      font-weight:900;
      font-size:18px;
      text-align:center;
    }
    .payBtn.primary{background: rgba(51,208,122,.18); border-color: rgba(51,208,122,.35)}
    .payBtn.warn{background: rgba(255,215,0,.14); border-color: rgba(255,215,0,.25)}*/
    .toast{
      position:fixed; left:50%; bottom:18px; transform:translateX(-50%);
      background: rgba(0,0,0,.75);
      color:white; padding:10px 14px;
      border-radius:14px;
      opacity:0; pointer-events:none;
      transition: opacity .25s ease;
      font-weight:800;
      z-index:99;
    }
    .toast.show{opacity:1}


/* v15 fixes */
.panel{flex:1;display:flex;flex-direction:column;min-height:0;}
.prodScroll{flex:1;min-height:0;-webkit-overflow-scrolling:touch;}

.pIconImg{width:28px;height:28px;object-fit:contain;filter:drop-shadow(0 2px 4px rgba(0,0,0,.25));}
/* bot√£o selecionado = contorno azul brilhante */
.payBtn.isChosen{
  border: 2px solid rgba(45,140,255,.95) !important;
  box-shadow:
    0 0 0 3px rgba(45,140,255,.22),
    0 0 18px rgba(45,140,255,.45) !important;
  filter: brightness(1.06);
}
    
    .payBtn.no{border-color:rgba(239,68,68,.95);color:#fee2e2;}
    .payBtn.no.isChosen{background:linear-gradient(135deg,rgba(239,68,68,.25),rgba(239,68,68,.12));box-shadow:0 0 0 1px rgba(239,68,68,.55) inset,0 12px 28px rgba(239,68,68,.18);}
.presCard{padding:14px; max-width:420px;}
    .presMsg{
      border: 2px solid rgba(70, 190, 120, .55);
      background: rgba(0,0,0,.18);
      margin: 12px 0;
    }
    .presMsg .infoText{
      font-size: 12px;
      line-height: 1.35;
      max-height: 170px;
      overflow: auto;
      padding-right: 6px;
    }
    .infoCard{margin-top:12px; padding:14px; border-radius:16px; background:rgba(0,0,0,.18); border:1px solid rgba(255,255,255,.10);}
    .infoTitle{font-weight:900; font-size:18px;}
    .infoText{margin-top:6px; font-size:13px; opacity:.90; line-height:1.35;}

    .presBtnsRow{display:flex; gap:10px;}
    .payBtn{
      flex:1;
      min-height:44px;
      padding:10px 8px;
      border-radius:18px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color:var(--text);
      font-weight:900;
      font-size:8px;
      text-align:center;
      cursor:pointer;
      touch-action: manipulation;
      -webkit-tap-highlight-color: transparent;
      display:flex;
      align-items:center;
      justify-content:center;
      line-height:1.1;
    }
    .payBtn.primary{background: rgba(51,208,122,.18); border-color: rgba(51,208,122,.35)}
    .payBtn.isChosen{outline:2px solid rgba(255,255,255,.35);}

/* ===== BOT√ÉO ESCOLHIDO: BORDA AMARELA BRILHANTE ===== */
.presBtnsRow .payBtn.isChosen{
  border: 2px solid rgba(255,215,0,.98) !important;
  box-shadow:
    0 0 0 3px rgba(255,215,0,.22),
    0 0 18px rgba(255,215,0,.45) !important;
  filter: brightness(1.06);
}

/* ===== STATUS (ret√¢ngulo preto j√° no seu #presStatusLine) ===== */
#presStatusLine{
  background: rgba(0,0,0,.55);
  border: 1px solid rgba(255,255,255,.10);
  border-radius: 12px;
  padding: 10px 12px;
  font-weight: 900;
}

/* ===== OVERLAY: PRESEN√áA CONFIRMADA (preto full) ===== */
.presSuccess{
  position:fixed;
  inset:0;
  width:100vw;
  height:100dvh;
  background:#000;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:999999;
}
.presSuccess.hidden{display:none;}
.presSuccessInner{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:14px;
  text-align:center;
  padding: 18px;
}
#presGif{
  width:220px;
  max-width:70vw;
  height:auto;
  object-fit:contain;
  filter: drop-shadow(0 14px 30px rgba(0,0,0,.55));
}
.presOkText{
  font-weight:1000;
  font-size:22px;
  color:#fff;
  text-shadow:0 2px 12px rgba(0,0,0,.6);
}

/* ===== WAIT: AVISO PRESEN√áA J√Å CONFIRMADA ===== */
.waitPresencaOk{
  margin-top:8px;
  padding:7px 10px;              /* menor */
  border-radius:12px;
  background: rgba(80,170,255,.16);  /* azul claro transparente */
  border: 1px solid rgba(140,210,255,.28);
  font-weight:900;
  font-size:12px;                /* menor (ajuda no celular) */
  line-height:1.05;              /* mais baixo */
  text-align:center;
  letter-spacing:.2px;

  transition: transform .35s ease, filter .35s ease, background .35s ease, border-color .35s ease, box-shadow .35s ease, opacity .35s ease;
  will-change: transform, filter;
}

.waitPresencaOk.pulse{
  animation: presPulse 1.15s ease-in-out infinite;
}

@keyframes presPulse{
  0%   { transform: scale(1);    filter: brightness(1);   }
  50%  { transform: scale(1.04); filter: brightness(1.15);}
  100% { transform: scale(1);    filter: brightness(1);   }
}

@keyframes presBlink{
  0%   { opacity:1; }
  50%  { opacity:.82; }
  100% { opacity:1; }
}

.waitPresencaOk.blink{
  animation: presBlink 1.0s ease-in-out infinite;
}

.waitPresencaOk.hidden{display:none;}

/* bolinha vermelha */
.msgBtn{ position:relative; }

.msgBadge{
  position:absolute;
  top:-6px; right:-6px;
  width:18px; height:18px;
  border-radius:999px;
  background:#ff3b30;
  border:2px solid rgba(6,26,43,1);
  color:#fff;
  font-weight:1000;
  font-size:12px;
  display:flex; align-items:center; justify-content:center;
  box-shadow:0 10px 24px rgba(0,0,0,.35);
}

.msgBadge.hidden{ display:none !important; }

/* ==========================
   ADMIN (tela completa) - CSS
   Cole no FINAL do seu <style>
   ========================== */
#scr_admin .cardTitleRow{
  display:flex;
  align-items:center;
  gap:10px;
  margin-bottom:10px;
}
#scr_admin .adminLogo{
  width:38px;height:38px;border-radius:10px;
  object-fit:cover;border:1px solid rgba(255,255,255,.18);
  box-shadow:0 8px 20px rgba(0,0,0,.25);
}
#scr_admin .adminHeadTxt{ line-height:1.1; }
#scr_admin .adminHeadTxt .t1{ font-weight:800; font-size:16px; letter-spacing:.2px; }
#scr_admin .adminHeadTxt .t2{ font-size:11px; opacity:.82; margin-top:2px; }

#scr_admin .adminTabs{
  display:flex;
  gap:8px;
  margin:10px 0 12px;
}
#scr_admin .adminTab{
  flex:1;
  padding:9px 10px;
  border-radius:12px;
  font-weight:800;
  font-size:12px;
  border:1px solid rgba(255,255,255,.15);
  background:rgba(255,255,255,.06);
  color:#fff;
  cursor:pointer;
  transition:transform .08s ease, filter .2s ease, background .2s ease;
}
#scr_admin .adminTab:active{ transform:scale(.99); }
#scr_admin .adminTab.active{
  background:rgba(0,210,255,.12);
  border-color:rgba(255,215,0,.75);
  box-shadow:0 0 0 2px rgba(255,215,0,.10) inset;
}

#scr_admin .adminPanel{
  margin-top:6px;
  padding:12px;
  border-radius:16px;
  border:1px solid rgba(255,255,255,.12);
  background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(0,0,0,.06));
  min-height:240px;
}
#scr_admin .hidden{ display:none !important; }

#scr_admin .adminGrid{
  display:grid;
  gap:10px;
}
#scr_admin .adminField label{
  display:block;
  font-size:11px;
  font-weight:800;
  opacity:.9;
  margin:2px 0 6px;
}
#scr_admin .adminField input,
#scr_admin .adminField textarea,
#scr_admin .adminField select{
  width:100%;
  box-sizing:border-box;
  padding:10px 10px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.14);
  background:rgba(0,0,0,.18);
  color:#fff;
  outline:none;
}
#scr_admin .adminField textarea{
  min-height:70px;
  resize:vertical;
}

#scr_admin .adminTwoCol{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
}
@media (max-width:420px){
  #scr_admin .adminTwoCol{ grid-template-columns:1fr; }
}

#scr_admin .adminTable{
  width:100%;
  border-collapse:separate;
  border-spacing:0;
  overflow:hidden;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.12);
  margin-top:8px;
}
.adminTableScroll{max-height:260px;overflow:auto;border-radius:14px;}
@media (max-width: 520px){
  .adminTableScroll{max-height:220px;}
}
.adminStatusSel{
  width:100%;
  background:rgba(255,255,255,.06);
  border:1px solid rgba(148,163,184,.25);
  color:#e5e7eb;
  border-radius:10px;
  padding:8px 10px;
  font-weight:700;
  outline:none;
}
.adminStatusSel option{color:#0b1220;}

#scr_admin .adminTable th,
#scr_admin .adminTable td{
  padding:8px 10px;
  font-size:12px;
  border-bottom:1px solid rgba(255,255,255,.08);
}
#scr_admin .adminTable th{
  font-size:11px;
  opacity:.9;
  text-transform:uppercase;
  letter-spacing:.35px;
  background:rgba(255,255,255,.06);
}
#scr_admin .pill{
  display:inline-flex; align-items:center; justify-content:center;
  padding:4px 8px;
  border-radius:999px;
  font-size:11px;
  font-weight:900;
  border:1px solid rgba(255,255,255,.14);
  background:rgba(0,0,0,.18);
}
#scr_admin .pill.ok{ background:rgba(46,204,113,.15); border-color:rgba(46,204,113,.35); }
#scr_admin .pill.warn{ background:rgba(52,152,219,.15); border-color:rgba(52,152,219,.35); }
#scr_admin .pill.bad{ background:rgba(231,76,60,.15); border-color:rgba(231,76,60,.35); }

#scr_admin .adminFooterBtns{
  display:flex;
  gap:10px;
  margin-top:12px;
}
#scr_admin #btnAdminSalvar{
  flex:1;
}
#scr_admin #btnAdminSair{
  width:86px;
}
#scr_admin .adminMini{
  margin-top:10px;
  font-size:11px;
  opacity:.8;
}
#scr_admin .adminMini strong{ opacity:1; }
#scr_admin .adminJsonBox{
  width:100%;
  margin-top:10px;
  padding:10px;
  border-radius:14px;
  border:1px dashed rgba(255,255,255,.22);
  background:rgba(0,0,0,.18);
  color:#fff;
  font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size:11px;
  line-height:1.35;
  white-space:pre-wrap;
  word-break:break-word;
}
/* container do conte√∫do dentro das screens */
.phoneFrame{
  width:100%;
  min-height:100%;
  display:flex;
  align-items:flex-start;
  justify-content:center;
  padding: 14px 14px 18px;
  overflow:auto;
}

 /* ==========================
   ADMIN ONLINE (UI PREMIUM)
   cole no FINAL do <style>
   ========================== */
.adminWrap{
  width:100%;
  max-width:420px;
  margin:0 auto;
  padding:14px 14px 12px;
}
.adminHeader{
  display:flex; align-items:center; gap:10px;
  padding:12px 12px;
  border-radius:18px;
  background: rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.10);
}
.adminHeader img{width:34px;height:34px;border-radius:10px;object-fit:cover;}
.adminHeader .t1{font-weight:900; font-size:15px; line-height:1.1;}
.adminHeader .t2{font-size:11px; opacity:.75; margin-top:2px;}

.adminTabs{
  display:flex; gap:10px;
  margin-top:12px;
}
.adminTab{
  flex:1;
  padding:10px 10px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.06);
  color:#fff;
  font-weight:900;
  font-size:12px;
  letter-spacing:.3px;
  cursor:pointer;
}
.adminTab.active{
  outline:2px solid rgba(255,220,0,.65);
  background: rgba(0, 200, 255, .10);
}

.adminPanel{
  margin-top:12px;
  border-radius:20px;
  background: rgba(0,0,0,.18);
  border:1px solid rgba(255,255,255,.10);
  overflow:hidden;
}
.adminScroll{
  max-height:520px;
  overflow:auto;
  padding:12px;
}

.adminGrid2{display:grid; grid-template-columns:1fr 1fr; gap:10px;}
@media(max-width:420px){ .adminGrid2{grid-template-columns:1fr;} }

.aLabel{font-size:11px; opacity:.75; margin:10px 0 6px;}
.aInput,.aSelect{
  width:100%;
  padding:10px 10px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.22);
  color:#fff;
  outline:none;
}
.aInput::placeholder{opacity:.55;}

.adminTable{
  width:100%;
  border-collapse:collapse;
  overflow:hidden;
  border-radius:14px;
}
.adminTable th, .adminTable td{
  padding:10px 10px;
  border-bottom:1px solid rgba(255,255,255,.08);
  font-size:12px;
}
.adminTable th{
  text-transform:uppercase;
  letter-spacing:.3px;
  font-size:11px;
  opacity:.85;
}
.rowBtn{
  width:100%;
  text-align:left;
  background:transparent;
  border:none;
  color:#fff;
  cursor:pointer;
  padding:0;
}
.badgeSt{
  display:inline-block;
  padding:4px 8px;
  border-radius:999px;
  font-size:11px;
  font-weight:900;
  border:1px solid rgba(255,255,255,.12);
}
.st-N{background:rgba(255,60,60,.18);}
.st-SS{background:rgba(255,220,0,.16);}
.st-SA{background:rgba(0,190,255,.16);}
.st-SE{background:rgba(0,255,140,.14);}

.adminFooter{
  display:flex;
  gap:10px;
  padding:12px;
}
.btnAdminPrimary{
  flex:1;
  padding:12px 10px;
  border-radius:14px;
  border:none;
  background: linear-gradient(90deg, rgba(0,200,255,.95), rgba(90,120,255,.95));
  color:#00131f;
  font-weight:900;
  cursor:pointer;
}
.btnAdminDanger{
  width:90px;
  padding:12px 10px;
  border-radius:14px;
  border:none;
  background: rgba(255,0,0,.75);
  color:#fff;
  font-weight:900;
  cursor:pointer;
}

.adminResumo{
  margin-top:10px;
  border-radius:18px;
  padding:12px;
  border:1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.06);
}
.adminResumo .rTitle{font-weight:900; font-size:12px; opacity:.9; margin-bottom:10px;}
.adminResumo .rLine{display:flex; justify-content:space-between; gap:10px; font-size:12px; padding:6px 0; border-bottom:1px solid rgba(255,255,255,.07);}
.adminResumo .rLine:last-child{border-bottom:none;}
.adminResumo .k{opacity:.78;}
.adminResumo .v{font-weight:900;}

.adminModal{
  position:fixed; inset:0;
  display:none;
  align-items:flex-end; justify-content:center;
  background: rgba(0,0,0,.55);
  z-index:9999;
}
.adminModal.open{display:flex;}
.adminSheet{
  width:min(420px, 96vw);
  border-radius:18px 18px 0 0;
  background: radial-gradient(800px 600px at 50% 0%, rgba(0,170,255,.18), rgba(0,0,0,.55));
  border:1px solid rgba(255,255,255,.14);
  padding:12px;
  max-height:78vh;
  overflow:auto;
}
.sheetHead{display:flex; justify-content:space-between; align-items:center; gap:12px;}
.sheetHead .h1{font-weight:900; font-size:13px;}
.sheetClose{border:none; background:rgba(255,255,255,.08); color:#fff; border-radius:12px; padding:8px 10px; font-weight:900; cursor:pointer;}
.sheetBlock{margin-top:10px; padding:10px; border-radius:14px; background:rgba(0,0,0,.20); border:1px solid rgba(255,255,255,.10);}
.sheetRow{display:flex; justify-content:space-between; gap:10px; font-size:12px; padding:6px 0; border-bottom:1px solid rgba(255,255,255,.07);}
.sheetRow:last-child{border-bottom:none;}
   

/* ===================================================================
   üé® ADMIN PANEL - DESIGN MODERNO (teste.html + v16)
   =================================================================== */

#adminPanel {
  background: rgba(10, 25, 41, 0.95) !important;
  backdrop-filter: blur(20px) !important;
  border: 1px solid rgba(255,255,255,0.1) !important;
  box-shadow: 0 8px 32px rgba(0,0,0,0.4) !important;
}

#adminHeader {
  background: rgba(0,0,0,0.3) !important;
  border-bottom: 1px solid rgba(255,255,255,0.1) !important;
  padding: 16px 20px !important;
}

#adminHeader h2 {
  color: #4fc3f7 !important;
  font-weight: 600 !important;
}

.adminTabs {
  display: flex !important;
  gap: 8px !important;
  padding: 12px 20px !important;
  background: rgba(0,0,0,0.2) !important;
  border-bottom: 1px solid rgba(255,255,255,0.1) !important;
}

.adminTab {
  padding: 10px 20px !important;
  background: rgba(255,255,255,0.05) !important;
  border: 1px solid rgba(255,255,255,0.1) !important;
  border-radius: 8px !important;
  color: rgba(255,255,255,0.7) !important;
  cursor: pointer !important;
  transition: all 0.2s !important;
}

.adminTab:hover {
  background: rgba(255,255,255,0.1) !important;
  color: #fff !important;
}

.adminTab.active {
  background: linear-gradient(90deg, #1bb3ff, #3b6cff) !important;
  color: #001018 !important;
  font-weight: 700 !important;
}

.adminTabContent {
  padding: 24px !important;
  background: rgba(0,0,0,0.2) !important;
}

.aLabel {
  color: #81c784 !important;
  font-weight: 500 !important;
  margin-bottom: 6px !important;
}

.aInput, select.aInput, textarea.aInput {
  background: rgba(0,0,0,0.3) !important;
  border: 1px solid rgba(255,255,255,0.2) !important;
  border-radius: 8px !important;
  color: #fff !important;
  padding: 12px 16px !important;
}

.aInput:focus, select.aInput:focus, textarea.aInput:focus {
  border-color: #4fc3f7 !important;
  background: rgba(0,0,0,0.4) !important;
  box-shadow: 0 0 0 3px rgba(79, 195, 247, 0.1) !important;
}

button.adminBtnConfirm {
  background: linear-gradient(90deg, #1bb3ff, #3b6cff) !important;
  color: #001018 !important;
  padding: 14px 32px !important;
  border-radius: 12px !important;
  font-weight: 700 !important;
}

button.adminBtnConfirm:hover {
  opacity: 0.9 !important;
  transform: translateY(-1px) !important;
}

.adminResumo {
  background: rgba(0,0,0,0.3) !important;
  border: 1px solid rgba(255,255,255,0.1) !important;
  border-radius: 12px !important;
  padding: 16px !important;
  margin-bottom: 20px !important;
}

.rTitle {
  color: #4fc3f7 !important;
  font-size: 18px !important;
  font-weight: 600 !important;
  margin-bottom: 12px !important;
}

.rLine {
  display: flex !important;
  justify-content: space-between !important;
  padding: 6px 0 !important;
  border-bottom: 1px solid rgba(255,255,255,0.05) !important;
}

.rLabel { opacity: 0.8 !important; }
.rValue { font-weight: 700 !important; }

.status-ok { color: #10b981 !important; font-weight: 600 !important; }
.status-parcial { color: #f59e0b !important; font-weight: 600 !important; }
.status-nao { color: #ef4444 !important; }


    .status-naovou{background:rgba(245,158,11,.16);border:1px solid rgba(245,158,11,.35);color:#fde68a;}
.adminTable {
  width: 100% !important;
  border-collapse: collapse !important;
  margin-top: 10px !important;
}

.adminTable th {
  background: rgba(255,255,255,0.1) !important;
  padding: 12px !important;
  text-align: left !important;
  font-weight: 600 !important;
  color: #4fc3f7 !important;
  border-bottom: 2px solid rgba(255,255,255,0.2) !important;
}

.adminTable td {
  padding: 10px 12px !important;
  border-bottom: 1px solid rgba(255,255,255,0.05) !important;
}

.adminTable tr:hover {
  background: rgba(255,255,255,0.03) !important;
}
  
/* ===== V0 MODAL (Sess√£o n√£o convocada) ===== */
.modal-overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.65);
  backdrop-filter:blur(6px);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:9999;
}
.hidden{display:none;}
.v0-card{
  width:90%;
  max-width:420px;
  background:linear-gradient(180deg,#071c3b,#0b2a5e);
  border-radius:22px;
  padding:28px 24px 32px;
  text-align:center;
  box-shadow:0 25px 60px rgba(0,0,0,.6);
  animation:fadeInScale .35s ease;
}

/* ===== V0: borda animada premium (efeito neon) ===== */
.v0-card{ position:relative; overflow:hidden; }
.v0-card::before{
  content:"";
  position:absolute;
  inset:-2px;
  background: conic-gradient(from 0deg,
    rgba(45,140,255,0) 0deg,
    rgba(45,140,255,.95) 40deg,
    rgba(51,208,122,.45) 90deg,
    rgba(45,140,255,.95) 140deg,
    rgba(45,140,255,0) 220deg,
    rgba(255,255,255,.0) 360deg
  );
  animation: v0BorderSpin 3.5s linear infinite;
  filter: blur(0px);
  opacity:.95;
}
.v0-card::after{
  content:"";
  position:absolute;
  inset:2px;
  background:linear-gradient(180deg,#071c3b,#0b2a5e);
  border-radius:20px;
  z-index:0;
}
.v0-card > *{ position:relative; z-index:1; }
@keyframes v0BorderSpin{
  to{ transform: rotate(360deg); }
}

@keyframes fadeInScale{
  from{opacity:0; transform:scale(.9);}
  to{opacity:1; transform:scale(1);}
}
.v0-header{
  display:flex;
  align-items:center;
  gap:12px;
  /* sobe um pouco e aumenta respiro pro √≠cone pulsante */
  margin:-10px 0 28px;
  justify-content:flex-start;
  width:100%;
  padding:10px 14px;
  border:2px solid rgba(34,197,94,.95);
  border-radius:14px;
  background:rgba(2,6,23,.18);
  cursor:pointer;
  user-select:none;
}
.v0-logo{
  width:42px;
  height:42px;
  border-radius:50%;
  object-fit:cover;
  box-shadow:0 6px 18px rgba(0,0,0,.35);
  border:1px solid rgba(255,255,255,.25);
}
.v0-loja{font-weight:600;font-size:15px;}
.v0-sub{font-size:12px;opacity:.7;}
.v0-icon{
  font-size:48px;
  width:90px;
  height:90px;
  border-radius:50%;
  border:3px solid #ffcc66;
  display:flex;
  align-items:center;
  justify-content:center;
  margin:0 auto 20px;
  color:#ffcc66;
  animation:pulse 1.8s infinite;
}
@keyframes pulse{
  0%{box-shadow:0 0 0 0 rgba(255,204,102,.5);}
  70%{box-shadow:0 0 0 18px rgba(255,204,102,0);}
  100%{box-shadow:0 0 0 0 rgba(255,204,102,0);}
}
.v0-title{font-size:20px;font-weight:700;margin-bottom:14px;}
.v0-text{font-size:14px;line-height:1.6;opacity:.85;margin-bottom:22px;}
.v0-btn{
  background:#0d5eff;
  border:none;
  padding:10px 22px;
  border-radius:12px;
  color:white;
  font-weight:600;
  cursor:pointer;
  box-shadow:0 8px 18px rgba(13,94,255,.4);
}

</style>
</head>

<body>
  <div id="toast" class="toast"></div>

  <!-- Splash 1 -->
  <section id="scr_splash1" class="screen active safe">
    <div class="splashCenter">
      <img id="splashSymbol" class="splashSymbol" src="./assets/maconaria.png" alt="Carregando" style="width:160px;height:160px;object-fit:contain;">
      <div class="splashLoading" style="margin-top:6px;font-weight:900;font-size:18px;opacity:.95;">Carregando‚Ä¶..</div>
    </div>
  </section>

  <!-- Splash 2 -->
  <section id="scr_splash2" class="screen safe">
    <div class="splashCenter">
      <div class="logoWrap">
        <img id="splashLogo" src="./assets/logo-Clementino-Brito.jpeg" alt="Logo"/>
      </div>
      <div class="brandText">Sistema √Ågape</div>
    </div>
  </section>

  <!-- Wait -->
  <section id="scr_wait" class="screen safe">
    <div class="wrap">
      <div class="card waitCard">
        <div class="topBrand">
          <div class="bLogo">
            <img id="brandLogoWait" src="./assets/logo-Clementino-Brito.jpeg" alt="Logo"/>
          </div>
          <div class="bTxt">
            <div class="bTitle" id="lojaNomeWait">Loja</div>
            <div class="bSub" id="lojaSubWait">App Agape ‚Ä¢ Consumo & Pagamento</div>
          </div>
        </div>

        <div class="sessionBar">
          <div class="dotBig" id="sessaoDotWait"></div>
          <div class="sessionLine" id="sessaoLineWait">Sess√£o fechada ‚Äî ‚Äî</div>
          <button class="msgBtn" id="btnEnvelope" type="button" aria-label="Mensagem do Vener√°vel">
            <img src="./assets/icon-envelope.png" alt="" class="msgIcon">
            <span class="msgBadge hidden" id="badgeConvocacao">!</span>
          </button>
        </div>

        <div class="pixBar" style="margin-top:12px;">
          <div class="pixBadge"><img src="./assets/logo-Clementino-Brito.jpeg" alt="Pix"></div>
          <div class="pixKey" id="pixChaveWait">‚Äî</div>
        </div>

        <div class="infoCard">
          <div class="infoTitle">Sess√£o ainda n√£o liberada üîí</div>
          <div class="infoText">A sess√£o ainda n√£o foi aberta pelo respons√°vel, mas n√£o se preocupe. Quando liberar a sess√£o, automaticamente aparecer√° a tela de login.</div>
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:12px;">
            <div style="padding:12px;border-radius:14px;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);">
              <div style="font-size:12px;opacity:.75;">√öltima verifica√ß√£o</div>
              <div style="margin-top:4px;font-weight:900;font-size:16px;" id="lastCheck">‚Äî</div>
            </div>
            <div style="padding:12px;border-radius:14px;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);">
              <div style="font-size:12px;opacity:.75;">Sess√£o</div>
              <div style="margin-top:4px;font-weight:900;font-size:16px;" id="sessaoStatus">Fechada</div>
            </div>
          </div>
          <button class="miniBtn" id="btnSairWait" type="button" style="margin-top:12px;background:#e53935;border-color:#e53935;color:#fff;">
            Sair do aplicativo
          </button>
        </div>

<!-- 1) COLE ISTO DENTRO DO #scr_wait (ex: logo abaixo do infoCard ou antes do hint) -->
<div id="waitPresencaOk" class="waitPresencaOk hidden">‚úÖ PRESEN√áA J√Å CONFIRMADA</div>

        <div class="hint">
          <div style="font-weight:900;font-size:14px;">Modo tesoureiro</div>
          <div style="font-size:13px;opacity:.95;margin-top:4px;">toque 5x no logo para abrir Admin (sess√£o, caixa, produtos, Pix).</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Presen√ßa -->
  <section id="scr_presenca" class="screen safe">
    <div class="wrap">
      <div class="card presCard">

        <div class="topBrand presTop">
          <div class="bLogo">
            <img id="brandLogoPres" src="./assets/logo-Clementino-Brito.jpeg" alt="Logo"/>
          </div>
          <div class="bTxt">
            <div class="bTitle" id="lojaNomePres">Loja</div>
            <div class="bSub">Presen√ßa ‚Ä¢ Sess√£o & Agape</div>
          </div>
        </div>

        <div class="sessionBar presSessionBar">
          <div class="dotBig" id="sessaoDotPres"></div>
          <div class="sessionLine" id="sessaoLinePres">Sess√£o fechada</div>
        </div>

        <div class="infoCard presMsg">
          <div class="infoTitle">Chamado do Vener√°vel</div>
          <div class="infoText" id="presTexto">Carregando...</div>
        </div>

        <div class="presBtnsRow">
          <button class="payBtn primary" id="btnRespSessaoAgape" type="button">Sess√£o e Agape</button>
          <button class="payBtn" id="btnRespSessao" type="button">Somente sess√£o</button>
          <button class="payBtn" id="btnRespAgape" type="button">Somente √°gape</button>
        <button class="payBtn no" id="btnRespNaoVou" type="button">N√£o vou</button>
        </div>

        <div class="hint" id="presStatusLine">Voc√™ ainda n√£o respondeu.</div>

        <div class="presResumo">
          <div class="presResumoLeft">
            <div class="presResumoTitle">Resumo:</div>
            <div class="presResumoLine"><span>Sess√£o e Agape:</span><b id="rSA">0</b></div>
            <div class="presResumoLine"><span>Somente sess√£o:</span><b id="rS">0</b></div>
            <div class="presResumoLine"><span>Somente √°gape:</span><b id="rA">0</b></div>
            <div class="presResumoLine"><span>N√£o vou:</span><b id="rNV">0</b></div>
            <div class="presResumoLine"><span>Total respondidos:</span><b id="rT">0</b></div>
            <div class="presResumoLine"><span>Total n√£o respondidos:</span><b id="rN">0</b></div>
          </div>

          <div class="presResumoRight" style="display:flex;flex-direction:column;align-items:center;justify-content:center;">
            <div class="barBox">
              <div class="barTop" id="barNao">0</div>
              <div class="barBottom" id="barSim">0</div>
            </div>
            <div class="barLegend">
              <span class="lgNo" style="display:inline-flex;gap:6px;align-items:center;"><i></i>N√£o</span>
              <span class="lgYes" style="display:inline-flex;gap:6px;align-items:center;"><i></i>Sim</span>
            </div>
          </div>
        </div>

        <button class="btn2" id="btnFecharPresenca" type="button">Fechar</button>
      </div>
    </div>
  </section>

   
  <!-- Login -->
  <section id="scr_login" class="screen safe">
    <div class="wrap">
      <div class="topBrand" id="brandBar">
        <div class="bLogo"><img id="brandLogo" alt="logo"/></div>
        <div class="bTxt">
          <div class="bTitle" id="lojaNome">Loja</div>
          <div class="bSub" id="lojaSub"></div>
        </div>
      </div>

      <div class="sessionBar" id="sessionBarLogin">
        <span class="dotBig" id="sessaoDotLogin" style="width:16px;height:16px;border-radius:50%;"></span>
        <div class="sessionLine" id="sessaoLineLogin">Sess√£o ‚Äî</div>
      </div>

      <div class="pixBar">
        <div class="pixBadge"><img src="./assets/logo-pix.jpg" alt="Pix"></div>
        <div class="pixKey" id="pixChave">‚Äî</div>
      </div>

      <div class="card" id="loginCard">
        <h2 id="welcomeTitle" style="margin:0 0 6px 0; font-size:34px; letter-spacing:.2px">Bem-vindo üëã</h2>
        <p style="margin:0 0 14px 0; color:var(--muted)">Digite seu <strong>CIM</strong> para entrar. Bot√µes grandes e tudo bem simples.</p>

        <div id="telWrap">
          <label style="display:block; font-weight:700; margin:10px 0 6px 0; font-size:15px">Telefone</label>
          <input id="inpTel" inputmode="tel" placeholder="Ex: 48999990000" style="width:100%;padding:14px;border-radius:16px;border:1px solid rgba(255,255,255,.12);background: rgba(255,255,255,.06);color:var(--text);outline:none;font-size:16px;" />
        </div>

        <label style="display:block; font-weight:700; margin:10px 0 6px 0; font-size:15px">CIM (senha)</label>
        <input id="inpCIM" inputmode="numeric" placeholder="Digite seu CIM" style="width:100%;padding:14px;border-radius:16px;border:1px solid rgba(255,255,255,.12);background: rgba(255,255,255,.06);color:var(--text);outline:none;font-size:16px;" />

        <button class="btn" id="btnEntrar">Entrar</button>
        <button class="miniBtn" id="btnSairLogin" style="width:100%;margin-top:10px;">Sair do aplicativo</button>

        <div style="margin-top:10px; color: rgba(255,255,255,.65)">Admin: toque 5x no logo.</div>
      </div>
    </div>
  </section>

  <!-- Consumo -->
  <section id="scr_consumo" class="screen safe">
    <div class="page">
      <div class="topBrand">
        <div class="bLogo"><img id="brandLogoCons" src="./assets/logo-Clementino-Brito.jpeg" alt="logo"/></div>
        <div class="bTxt">
          <div class="bTitle" id="consLoja">Loja</div>
          <div class="bSub" id="consSub"></div>
        </div>
      </div>

      <div class="sessionBar">
        <span class="dotBig" id="sessaoDotCons"></span>
        <div class="sessionLine" id="sessaoLineCons">Sess√£o ‚Äî</div>
      </div>

      <div class="cashBar" id="cashBar">
        <div class="cashText">Valor em caixa: <span id="cashValue">R$ 0,00</span></div>
      </div>

      <div class="pixBar">
        <div class="pixKey" >Meu Consumo</div>
        <button class="miniBtn" id="btnSair">Sair</button>
      </div>

      <div class="prodScroll" id="prodScroll">
        <div id="prodList"></div>
      </div>

      <div class="consFooter">
        <div class="totalBox">
          <div class="tLbl">Total</div>
          <div class="tVal" id="totalValue">R$ 0,00</div>
        </div>
        <button class="btn2" id="btnFechar">Fechar e pagar</button>
      </div>
    </div>
  </section>

   <!-- Pagamento -->
  <section id="scr_pagamento" class="screen safe">
    <div class="wrap">
      <div class="topBrand" id="payBrandBar">
        <div class="bLogo"><img id="payLogo" src="./assets/logo-Clementino-Brito.jpeg" alt="Logo"/></div>
        <div class="bTxt">
          <div class="bTitle" id="payLoja">Loja</div>
          <div class="bSub">App Agape ‚Ä¢ Consumo & Pagamento</div>
        </div>
      </div>

      <div class="sessionBar">
        <span class="dotbig" id="paySessaoDot" style="width:12px;height:12px;border-radius:99px;"></span>
        <div class="sessionLine" id="paySessaoLine">Sess√£o ‚Äî</div>
      </div>

      <div class="payCard">
        <div class="payMsg">
          <div class="payHello" id="payHello">Oi meu irm√£o,</div>
          <div class="payTotal">Sua conta totalizou <span id="payTotal">R$ 0,00</span>:</div><br>
        </div>

        <div id="payItems" class="payItems"></div>
              
        <div class="payQ"><br>Como deseja pagar?</div><br>

        <div class="payIconRow" aria-label="Formas de pagamento">
          <button class="payIconBtn" id="btnPix" type="button" data-tip="Pix">
            <img src="./assets/logo-pix.jpg" alt="Pix" class="payIconImg"/>
          </button>

          <button class="payIconBtn" id="btnDinheiro" type="button" data-tip="Dinheiro">
            <span class="paySvg" aria-hidden="true">üíµ</span>
          </button>

          <button class="payIconBtn" id="btnProxima" type="button" data-tip="Pr√≥xima sess√£o">
            <span class="paySvg" aria-hidden="true">üìÖ</span>
          </button>
        </div>

        <button class="btn2 payBack" id="btnVoltarConsumo" type="button">Voltar para comanda</button>
        <div class="payHint">Ao pagar, registramos e voltamos para o login.</div>
      </div>
    </div>


    <!-- Modal Pix -->
    <div id="pixModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="pixTitle">
      <div class="modalCard">
        <div class="modalTop">
          <div class="modalTitle" id="pixTitle">Pix</div>
          <button class="modalX" id="btnPixCancel" type="button" aria-label="Fechar">‚úï</button>
        </div>

        <div class="modalText">Copie a chave e fa√ßa a transfer√™ncia do valor exato.</div>

        <div class="pixValueRow">
          <div class="pixValueLbl">Valor</div>
          <div class="pixValue" id="pixValor">R$ 0,00</div>
        </div>

        <div class="pixKeyRow">
          <div class="pixKeyText" id="pixChaveModal">‚Äî</div>
          <button class="pixCopyBtn" id="btnCopyPix" type="button" title="Copiar">üìã</button>
        </div>

        <button class="btn2 modalOk" id="btnPixOk" type="button">OK, transferi</button>
        <button class="modalCancel" id="btnPixCancel2" type="button">Cancelar</button>
      </div>
    </div>

    <!-- Sucesso -->
    <div id="paySuccess" class="hidden" style="position:fixed;inset:0;background:rgba(230,204,24,.96);display:flex;align-items:center;justify-content:center;z-index:9999;">
      <div style="display:flex;flex-direction:column;align-items:center;gap:14px;text-align:center;">
        <img id="payGif" src="./assets/check.gif" alt="Pago" style="width:160px;height:160px;object-fit:contain;filter:drop-shadow(0 12px 26px rgba(0,0,0,.25));">
        <div style="font-weight:1000;font-size:22px;color:#053018;text-shadow:0 1px 0 rgba(255,255,255,.35);">Pagamento registrado</div>
      </div>
    </div>
  </section>
  <div id="presSuccess" class="presSuccess hidden" aria-hidden="true">
     <div class="presSuccessInner">
       <img id="presGif" src="./assets/presenca.gif" alt="Confirmado">
       <div class="presOkText">PRESEN√áA CONFIRMADA!!!!!!!!!</div>
    </div>
  </div>

<!-- ==========================
     ADMIN (SUBSTITUIR O SECTION INTEIRO)
     ========================== -->
<section id="scr_admin" class="screen">
  <div class="adminWrap">
    <div class="adminHeader">
      <img id="adminLogo" src="./assets/logo-Clementino-Brito.jpeg" alt="logo">
      <div>
        <div class="t1">Admin</div>
        <div class="t2">Configura√ß√£o ‚Ä¢ Sess√£o ‚Ä¢ Irm√£os</div>
      </div>
    </div>

    <div class="adminTabs">
      <button class="adminTab" id="tabCfg" type="button">CONFIGURA√á√ÉO</button>
      <button class="adminTab active" id="tabSessao" type="button">SESS√ÉO</button>
      <button class="adminTab" id="tabIrmaos" type="button">IRM√ÉOS</button>
    </div>

    <div class="adminPanel">
      <div class="adminScroll">

                <!-- ABA SESSAO -->
        <div id="adminViewSessao" class="hidden">
          <div class="adminGrid2">
            <div>
              <div class="aLabel">Status</div>
              <select class="aSelect" id="a_sessao_status">
                <option value="aberta">aberta</option>
                <option value="fechada">fechada</option>
              </select>
            </div>
            <div>
              <div class="aLabel">Data</div>
              <input class="aInput" id="a_sessao_data" placeholder="dd/mm/aaaa">
            </div>
          </div>

          <div class="adminGrid2">
            <div>
              <div class="aLabel">Caixa inicial</div>
              <input class="aInput" id="a_sessao_caixa" placeholder="0" inputmode="decimal">
            </div>
            <div>
              <div class="aLabel">Sess√£o ID (convoca√ß√£o)</div>
              <input class="aInput" id="a_conv_id" placeholder="2026-02-07-001">
            </div>
          </div>

          <div class="aLabel">Chamado</div>
          <input class="aInput" id="a_sessao_chamado" placeholder="Texto do chamado">
        </div>

        <!-- ABA CFG -->
        <div id="adminViewCfg">
          <div class="aLabel">Nome da loja</div>
          <input class="aInput" id="a_loja_nome" placeholder="Nome da loja">
          <div class="aLabel">Subt√≠tulo</div>
          <input class="aInput" id="a_loja_sub" placeholder="Subt√≠tulo">
          <div class="aLabel">PIX</div>
          <input class="aInput" id="a_loja_pix" placeholder="Chave PIX">
          <div class="aLabel">WhatsApp Tesoureiro (senha)</div>
          <input class="aInput" id="a_loja_tes" placeholder="55...">
          <div class="aLabel">Logo URL (GitHub)</div>
          <input class="aInput" id="a_logo_url" placeholder="./assets/logo...">
        </div>


        <!-- ABA IRMAOS (ONLINE) -->
        <div id="adminViewIrmaos" class="hidden">
          <div class="aLabel">Status: N√£o confirmado ‚Ä¢ Somente sess√£o ‚Ä¢ Somente √°gape ‚Ä¢ Sess√£o e √°gape</div>
          <div class="adminTableScroll">
<table class="adminTable" id="adminTableIrmaos">
            <thead>
              <tr>
                <th style="width:40px;">#</th>
                <th>IRM√ÉO</th>
                <th style="width:130px;">STATUS</th>
                <th style="width:90px;">PAGOU</th>
              </tr>
            </thead>
            <tbody id="adminIrmaosBody"></tbody>
          </table>
</div>

          <div class="adminResumo" id="adminResumoBox">
            <div class="rTitle">Resumo (online)</div>
            <div class="rLine"><span class="k">Total de irm√£os na sess√£o</span><span class="v" id="r_total_irmaos">‚Äî</span></div>
            <div class="rLine"><span class="k">N√£o confirmaram</span><span class="v" id="r_nao_confirm">‚Äî</span></div>
            <div class="rLine"><span class="k">Recebido em DINHEIRO</span><span class="v" id="r_din">‚Äî</span></div>
            <div class="rLine"><span class="k">Recebido em PIX</span><span class="v" id="r_pix">‚Äî</span></div>
            <div class="rLine"><span class="k">Pr√≥xima sess√£o (pend√™ncia)</span><span class="v" id="r_prox">‚Äî</span></div>
            <div class="rLine"><span class="k">Total em caixa (f√≠sico)</span><span class="v" id="r_caixa">‚Äî</span></div>
          </div>

          <div class="adminResumo" id="adminProdutosBox">
            <div class="rTitle">Consumo por produto (total)</div>
            <div id="r_prod_list" style="font-size:12px; opacity:.9;">‚Äî</div>
          </div>
        </div>
      </div>

      <div class="adminFooter">
        <button class="btnAdminPrimary" id="btnAdminSalvar" type="button">CONFIRMAR</button>
        <button class="btnAdminDanger" id="btnAdminSair" type="button">SAIR</button>
      </div>
    </div>
  </div>
</section>

<!-- MODAL/DETALHE IRM√ÉO -->
<div class="adminModal" id="adminModal">
  <div class="adminSheet">
    <div class="sheetHead">
      <div>
        <div class="h1" id="m_nome">Irm√£o</div>
        <div style="font-size:11px;opacity:.75" id="m_meta">‚Äî</div>
      </div>
      <button class="sheetClose" id="m_close" type="button">Fechar</button>
    </div>

    <div class="sheetBlock">
      <div class="sheetRow"><span>Status</span><b id="m_status">‚Äî</b></div>
      <div class="sheetRow"><span>Pagamentos</span><b id="m_pag">‚Äî</b></div>
    </div>

    <div class="sheetBlock">
      <div style="font-weight:900; font-size:12px; margin-bottom:8px;">Consumo (descri√ß√£o + qtd)</div>
      <div id="m_cons" style="font-size:12px; opacity:.92;">‚Äî</div>
    </div>

    <div class="sheetBlock">
      <div style="font-weight:900; font-size:12px; margin-bottom:8px;">Lan√ßar pagamento (online)</div>
      <div class="adminGrid2">
        <input class="aInput" id="m_valor" placeholder="Valor (ex: 10)" inputmode="decimal">
        <select class="aSelect" id="m_forma">
          <option value="DINHEIRO">DINHEIRO</option>
          <option value="PIX">PIX</option>
          <option value="PROXIMA_SESSAO">PROXIMA_SESSAO</option>
        </select>
      </div>
      <button class="btnAdminPrimary" id="m_btn_pagar" type="button" style="margin-top:10px;">Registrar pagamento</button>
    </div>
  </div>
</div>
</section>
 
<!-- ===== V0 MODAL ===== -->
<div id="modalV0" class="modal-overlay hidden">
  <div class="modal-card v0-card">
    <div class="v0-header" id="v0HeaderBtn" title="Duplo clique para entrar no ADM">
      <img id="v0Logo" class="v0-logo" src="./assets/logo-Clementino-Brito.jpeg" alt="Logo">
      <div>
        <div id="v0LojaNome" class="v0-loja"></div>
        <div class="v0-sub">App √Ågape ‚Ä¢ Consumo & Pagamento</div>
      </div>
    </div>
    <div class="v0-icon">!</div>
    <div class="v0-title">Aten√ß√£o</div>
    <div class="v0-text">
      O Vener√°vel ainda n√£o abriu a pr√≥xima sess√£o.<br><br>
      Fique tranquilo, assim que a convoca√ß√£o for realizada,
      voc√™ ser√° notificado pelo aplicativo.
    </div>
    <button id="btnV0Ok" class="v0-btn">OK</button>
  </div>
</div>

<script>
// ===== V0 (sess√£o fechada) =====
const DEFAULT_V0_LOGO = "https://erpimpar.com.br/agape/logo.jpeg";
window.__AGAPE_ADMIN_MODE = window.__AGAPE_ADMIN_MODE || false;

function showV0(){
  const modal = document.getElementById("modalV0");
  if(!modal) return;
  if(window.__AGAPE_ADMIN_MODE){ hideV0(); return; }

  try{
    if(window.CFG){
      const lojaNome = (CFG && CFG.loja && CFG.loja.nome) ? CFG.loja.nome : "";
      const logoSrc  = (CFG && CFG.loja && (CFG.loja.logo_url || CFG.loja.logo)) ? (CFG.loja.logo_url || CFG.loja.logo) : "";
      const nameEl = document.getElementById("v0LojaNome");
      if(nameEl) nameEl.textContent = lojaNome;

      const img = document.getElementById("v0Logo");
      if(img){
        img.src = (logoSrc || DEFAULT_V0_LOGO);
        img.onerror = function(){
          if(img.src !== DEFAULT_V0_LOGO) img.src = DEFAULT_V0_LOGO;
        };
      }
    }
  }catch(_){}

  modal.classList.remove("hidden");
}

function hideV0(){
  document.getElementById("modalV0")?.classList.add("hidden");
}

document.addEventListener("DOMContentLoaded", ()=>{
  document.getElementById("btnV0Ok")?.addEventListener("click", ()=>{
    hideV0();
    if(typeof sairDoAplicativo === "function"){
      sairDoAplicativo();
    }else{
      try{ window.open("about:blank","_self"); window.close(); }catch(e){}
    }
  });

  document.getElementById("v0HeaderBtn")?.addEventListener("dblclick", (e)=>{
    e.preventDefault();
    e.stopPropagation();
    window.__AGAPE_ADMIN_MODE = true;
    hideV0();
    if(typeof openAdmin === "function") openAdmin();
  });

  setTimeout(()=>{
    try{
      if(window.CFG && (CFG?.sessao?.status !== "aberta")) showV0();
    }catch(e){}
  }, 800);

  setInterval(()=>{
    try{
      if(window.__AGAPE_ADMIN_MODE){ hideV0(); return; }
      // ‚úÖ n√£o depende de toBool
      if (window.CFG && (CFG?.convocacao?.ativa === true)) hideV0();
      else showV0();
    }catch(e){}
  }, 1500);
});
</script>
