<!DOCTYPE html>
<html lang="pt-br" data-theme="light">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ERP IMPAR ‚Äî Login do Gerador de Documentos</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Merriweather:wght@700&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#f5f7fb;--card:#ffffff;--text:#0f172a;--muted:#475569;--border:#e2e8f0;
  --accent:#2563eb;--chip:#eef2ff;--chiptext:#334155;--ok:#10b981;--err:#ef4444;
}
:root[data-theme="dark"]{
  --bg:#0b1220;--card:#0f172a;--text:#e5e7eb;--muted:#93a3b8;--border:#1f2a40;
  --accent:#3b82f6;--chip:#122043;--chiptext:#bfdbfe;--ok:#34d399;--err:#f87171;
}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--text);font:15px/1.5 "Inter",system-ui,-apple-system,Segoe UI,Roboto,Arial}
.container{max-width:1160px;margin:0 auto;padding:16px}
.header{display:flex;align-items:center;gap:12px;margin-bottom:10px;justify-content:space-between}
.brand{display:flex;align-items:center;gap:12px}
.logo{height:36px;border-radius:6px}
.theme{border:1px solid var(--border);background:var(--card);color:var(--text);padding:8px 10px;border-radius:10px;cursor:pointer;font-weight:700}
.layout{display:grid;grid-template-columns:1fr;gap:18px}
.left .card{background:var(--card);border:1px solid var(--border);border-radius:14px;box-shadow:0 4px 18px rgba(15,23,42,.08);overflow:hidden}
.left img.hero{display:block;width:100%;height:auto;border-bottom:1px solid var(--border)}
.left .content{padding:14px 16px 18px}
.pill{display:inline-block;background:var(--chip);color:var(--chiptext);padding:6px 10px;border-radius:999px;border:1px solid #e0e7ff;font-weight:600;font-size:13px}
.h1{font:700 24px/1.3 "Merriweather",Georgia,serif;color:var(--text);margin:10px 0 0}
.right .card{background:var(--card);border:1px solid var(--border);border-radius:14px;box-shadow:0 4px 18px rgba(15,23,42,.08);overflow:hidden}
.form{padding:18px}
.form h2{margin:0 0 12px;font:700 22px/1 "Inter"}
label{display:block;font-weight:600;margin-bottom:6px;color:var(--muted)}
.input{width:100%;padding:12px 14px;border:1px solid #cbd5e1;border-radius:10px;font:15px "Inter";outline:none;background:var(--card);color:var(--text)}
.input:focus{border-color:var(--accent);box-shadow:0 0 0 2px rgba(37,99,235,.25)}
.actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
.btn{padding:11px 14px;border-radius:10px;border:1px solid #cbd5e1;background:var(--card);color:var(--text);font-weight:700;cursor:pointer}
.btn.primary{background:var(--accent);border-color:transparent;color:#fff}
.msg{margin-top:10px;font-size:13px}
.msg.ok{color:var(--ok)}
.msg.err{color:var(--err)}
.footer{margin-top:18px;color:var(--muted);font-size:13px}
@media(min-width:980px){
  .layout{grid-template-columns:3fr 2fr;align-items:start}
}

.input-wrap{position:relative}
.eye-toggle{line-height:0;position:absolute;right:10px;top:50%;transform:translateY(-50%);background:transparent;border:none;padding:0;cursor:pointer;color:#6b7280}
.eye-toggle:focus{outline:2px solid #2563eb33;border-radius:6px}
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <div class="brand">
      <img class="logo" src="assets/login-hero.png" alt="IMPAR">
      <div style="font-weight:700;">IMPAR ‚Äî Climatiza√ß√£o e Sistemas Ltda.</div>
    </div>
    <button class="theme" onclick="toggleTheme()" id="themeBtn">üåô Tema</button>
  </div>

  <div class="layout">
    <div class="left">
      <div class="card">
        <img class="hero" src="assets/login-hero.png" alt="Obra de climatiza√ß√£o">
        <div class="content">
          <span class="pill">Solu√ß√µes em Climatiza√ß√£o</span>
          <h1 class="h1">Desenvolvimento de projetos de climatiza√ß√£o, ventila√ß√£o e exaust√£o com <span style="color:#0ea5e9">excel√™ncia e qualidade.</span></h1>
        </div>
      </div>
    </div>

    <div class="right">
      <div class="card form">
        <h2>Acessar o Gerador de Documentos</h2>
        <form id="loginForm" action="#" method="post" onsubmit="login(); return false;">
        <div class="grid">
          <div>
            <label for="email">E-mail</label>
            <input id="email" class="input" placeholder="seuemail@imparsistemas.com" autocomplete="username">
          </div>
          \1<div class="input-wrap">\2</div></div>
          <div class="actions">
            <button class="btn" onclick="voltarERP()">‚óÄ Voltar para o menu do ERP IMPAR</button>
            <button class="btn primary" onclick="login()">Logar no Gerador de Documentos</button>
          </div>
          <div id="msg" class="msg"></div>
        </div>
        </form>
  </div>
</div>

<script>
// Tema
const STORAGE_KEY='impar_theme';
function applyTheme(t){ document.documentElement.setAttribute('data-theme', t); document.getElementById('themeBtn').textContent=(t==='dark'?'‚òÄÔ∏è Tema':'üåô Tema'); }
(function initTheme(){ const saved=localStorage.getItem(STORAGE_KEY); if(saved) applyTheme(saved); else applyTheme((window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches)?'dark':'light'); })();
function toggleTheme(){ const cur=document.documentElement.getAttribute('data-theme')||'light'; const next=(cur==='dark')?'light':'dark'; localStorage.setItem(STORAGE_KEY,next); applyTheme(next); }

// Login
async function loadUsuarios(){
  const r = await fetch('assets/usuario_doc.json?_=' + Date.now());
  if(!r.ok) throw new Error('Falha ao carregar usu√°rios');
  return r.json();
}
function voltarERP(){ window.location.href = 'https://www.erpimpar.com.br/'; }
async function login(){
  const email = (document.getElementById('email').value||'').trim().toLowerCase();
  const senha = (document.getElementById('senha').value||'').trim();
  const msg = document.getElementById('msg');
  msg.className='msg';
  try{
    const lista = await loadUsuarios();
    const user = lista.find(u => (u.Email||'').toLowerCase()===email && u.Senha===senha);
    if(!user){ msg.textContent='E-mail ou senha inv√°lidos.'; msg.classList.add('err'); return; }
    localStorage.setItem('impar_user', JSON.stringify(user));
    msg.textContent='Login realizado com sucesso! Redirecionando...'; msg.classList.add('ok');
    setTimeout(()=>{ window.location.href = 'documentos/index.html'; }, 400);
  }catch(e){
    msg.textContent='N√£o foi poss√≠vel autenticar. Verifique sua conex√£o.'; msg.classList.add('err');
  }
}
</script>
<script>
// Eye toggle: injects a button with SVG icons (eye / eye-off)
(function(){
  function $(sel, ctx){ return (ctx||document).querySelector(sel); }
  function ensureWrap(input){
    var wrap = input.parentElement;
    if (wrap && getComputedStyle(wrap).position === 'static') wrap.style.position = 'relative';
    return wrap || input;
  }
  function eyeSVG(){ return '<svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12Z" stroke="currentColor" stroke-width="2" fill="none"/><circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" fill="none"/></svg>'; }
  function eyeOffSVG(){ return '<svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12Z" stroke="currentColor" stroke-width="2" fill="none"/><circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" fill="none"/><path d="M3 21L21 3" stroke="currentColor" stroke-width="2"/></svg>'; }
  function attachTo(input){
    var wrap = ensureWrap(input);
    var btn  = document.createElement('button');
    btn.type = 'button';
    btn.className = 'eye-toggle';
    btn.setAttribute('aria-label','Mostrar senha');
    btn.setAttribute('aria-pressed','false');
    wrap.appendChild(btn);
    var visible=false;
    function update(){
      input.type = visible ? 'text' : 'password';
      btn.setAttribute('aria-pressed', visible ? 'true':'false');
      btn.setAttribute('aria-label', visible ? 'Ocultar senha' : 'Mostrar senha');
      btn.innerHTML = visible ? eyeOffSVG() : eyeSVG();
    }
    btn.addEventListener('click', function(e){ e.preventDefault(); visible=!visible; update(); });
    update();
  }
  function init(){
    var input = document.getElementById('senha') || document.querySelector('input[type="password"]');
    if (!input) return;
    attachTo(input);
  }
  if (document.readyState === 'loading'){ document.addEventListener('DOMContentLoaded', init); } else { init(); }
})();
</script>

</body>
</html>
