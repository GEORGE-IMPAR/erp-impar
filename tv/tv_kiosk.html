<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ERP √çMPAR ‚Äî TV Kiosk Mode</title>
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    html,body{height:100%;overflow:hidden}
    body{
      font-family:system-ui,sans-serif;
      background:linear-gradient(120deg,#0b1e4a,#0e3b6e,#0f766e);
      color:#e5e7eb;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .loading{
      text-align:center;
      padding:40px;
    }
    .loading h1{
      font-size:32px;
      margin-bottom:20px;
    }
    .loading p{
      font-size:18px;
      opacity:.8;
      margin-bottom:30px;
    }
    .spinner{
      width:60px;
      height:60px;
      border:6px solid rgba(34,197,94,.2);
      border-top-color:#22c55e;
      border-radius:50%;
      animation:spin 1s linear infinite;
      margin:0 auto;
    }
    @keyframes spin{
      to{transform:rotate(360deg)}
    }
    iframe{
      position:absolute;
      top:0;
      left:0;
      width:100%;
      height:100%;
      border:none;
      display:none;
    }
    iframe.show{
      display:block;
    }
  </style>
</head>
<body>

<div class="loading" id="loading">
  <h1>üñ•Ô∏è ERP √çMPAR ‚Äî Gest√£o √† Vista</h1>
  <p>Iniciando modo TV em tela cheia...</p>
  <div class="spinner"></div>
</div>

<iframe id="tvFrame" src="gestao_projetos_tv.html"></iframe>

<script>
// Ativar fullscreen automaticamente
window.addEventListener('DOMContentLoaded', () => {
  setTimeout(() => {
    ativarFullscreen();
  }, 1000);
});

function ativarFullscreen() {
  const elem = document.documentElement;
  
  const request = elem.requestFullscreen || 
                  elem.webkitRequestFullscreen || 
                  elem.msRequestFullscreen || 
                  elem.mozRequestFullScreen;
  
  if (request) {
    request.call(elem).then(() => {
      console.log('‚úÖ Fullscreen ativado!');
      mostrarDashboard();
    }).catch(err => {
      console.warn('‚ö†Ô∏è Fullscreen bloqueado pelo navegador. Clique na tela para ativar.');
      // Se falhar, mostrar mesmo assim
      setTimeout(mostrarDashboard, 500);
    });
  } else {
    // Navegador n√£o suporta, mostrar mesmo assim
    mostrarDashboard();
  }
}

function mostrarDashboard() {
  document.getElementById('loading').style.display = 'none';
  document.getElementById('tvFrame').classList.add('show');
}

// Tentar reativar fullscreen se sair
document.addEventListener('fullscreenchange', () => {
  if (!document.fullscreenElement) {
    console.log('‚ö†Ô∏è Saiu do fullscreen');
    // Opcional: reativar automaticamente
    // setTimeout(ativarFullscreen, 2000);
  }
});

// Permitir ativar fullscreen com clique
document.addEventListener('click', () => {
  if (!document.fullscreenElement) {
    ativarFullscreen();
  }
}, { once: true });
</script>

</body>
</html>
