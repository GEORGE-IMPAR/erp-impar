<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Solicitação de Materiais - ERP Ímpar</title>
  <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
  <div class="solicitacao-container">
    <h2>Solicitação de Materiais</h2>

    <!-- Usuário logado -->
    <p><strong>Usuário:</strong> <span id="usuarioNome"></span></p>
    <p style="font-size: 14px; color: #555;"><span id="usuarioEmail"></span></p>

    <form id="solicitacaoForm">
      <!-- Obra -->
      <label for="obra">Obra:</label>
      <select id="obra" required>
        <option value="">Selecione a obra...</option>
      </select>

      <!-- Centro de Custo -->
      <label for="centroCusto">Centro de Custo:</label>
      <input type="text" id="centroCusto" placeholder="Centro de Custo" readonly>

      <!-- Prazo limite de entrega -->
      <label for="prazo">Prazo limite de entrega:</label>
      <input type="date" id="prazo" required>

      <!-- Materiais -->
      <label for="material">Material:</label>
      <select id="material" required>
        <option value="">Selecione o material...</option>
      </select>

      <label for="quantidade">Quantidade:</label>
      <input type="number" id="quantidade" placeholder="Digite a quantidade" min="1" required>

      <label for="und">UND:</label>
      <select id="und" required>
        <option value="">Selecione...</option>
        <option value="UN">Unidade</option>
        <option value="KG">Kg</option>
        <option value="M">Metro</option>
        <option value="L">Litro</option>
      </select>

      <button type="button" id="addMaterial">Adicionar Material</button>

      <!-- Lista de Materiais -->
      <div class="tabela-container">
        <table id="tabelaMateriais">
          <thead>
            <tr>
              <th>Material</th>
              <th>Quantidade</th>
              <th>UND</th>
              <th>Ação</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <!-- Local de entrega -->
      <label for="localEntrega">Local de Entrega:</label>
      <select id="localEntrega" required>
        <option value="">Selecione o local...</option>
        <option value="Impar">Impar</option>
        <option value="Cliente">Cliente</option>
      </select>

      <!-- Botão de Enviar -->
      <button type="button" id="enviarSolicitacao">Baixar relatório e enviar por e-mail</button>
    </form>
  </div>

  <!-- SweetAlert2 -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <!-- EmailJS -->
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
  <!-- Script Principal -->
  <script src="assets/js/script.js"></script>

  <script>
    // Preencher usuário logado
    document.addEventListener("DOMContentLoaded", () => {
      const usuarioLogado = JSON.parse(localStorage.getItem("usuarioLogado"));
      if (usuarioLogado) {
        document.getElementById("usuarioNome").textContent = usuarioLogado.Nome;
        document.getElementById("usuarioEmail").textContent = usuarioLogado.Email;
      }
    });
  </script>
</body>
</html>
